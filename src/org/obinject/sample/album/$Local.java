package org.obinject.sample.album; import org.obinject.block.Page; import org.obinject.block.PullPage; import org.obinject.block.PushPage; import org.obinject.device.File; import org.obinject.exception.TransientObjectException; import org.obinject.meta.Entity; import org.obinject.meta.Uuid; import org.obinject.queries.Attribute; import org.obinject.queries.Schema; import org.obinject.storage.BTree; import org.obinject.storage.BTreeEntity; import org.obinject.storage.EntityStructure; import org.obinject.storage.KeyStructure; import org.obinject.storage.Structure; import org.obinject.storage.MTree; import org.obinject.storage.RTree; public class $Local extends Local implements Entity<$Local> { protected Uuid uuid; private static Uuid classId; public static Uuid getClassId(){ if ($Local.classId == null) {$Local.classId = Uuid.fromString("108E10F9-6710-2225-1391-F9FA7FC81D33"); }return $Local.classId; } public static final BTreeEntity<$Local> entityStructure = new BTreeEntity<$Local>(new File("build/classes/org/obinject/sample/album/album.dbo", 4096)){}; public static final BTree<UniqueOneLocal> uniqueOneLocalStructure = new BTree<UniqueOneLocal>(new File("build/classes/org/obinject/sample/album/album.dbo", 4096)){}; public static final RTree<RectangleOneLocal> rectangleOneLocalStructure = new RTree<RectangleOneLocal>(new File("build/classes/org/obinject/sample/album/album.dbo", 4096)){}; public static final MTree<CoordinateOneLocal> coordinateOneLocalStructure = new MTree<CoordinateOneLocal>(new File("build/classes/org/obinject/sample/album/album.dbo", 4096)){}; public static final MTree<EditionOneLocal> editionOneLocalStructure = new MTree<EditionOneLocal>(new File("build/classes/org/obinject/sample/album/album.dbo", 4096)){}; public static final MTree<PointOneLocal> pointOneLocalStructure = new MTree<PointOneLocal>(new File("build/classes/org/obinject/sample/album/album.dbo", 4096)){}; public static final Attribute<Integer> codigo = new Attribute<Integer> (){ @Override public Integer valueOfAttribute(Entity entity) { return ((Local)entity).getCodigo(); } }; public static final Attribute<java.lang.String> nome = new Attribute<java.lang.String> (){ @Override public java.lang.String valueOfAttribute(Entity entity) { return ((Local)entity).getNome(); } }; public static final Attribute<java.lang.String> estado = new Attribute<java.lang.String> (){ @Override public java.lang.String valueOfAttribute(Entity entity) { return ((Local)entity).getEstado(); } }; public static final Attribute<java.lang.String> pais = new Attribute<java.lang.String> (){ @Override public java.lang.String valueOfAttribute(Entity entity) { return ((Local)entity).getPais(); } }; public static final Attribute<Double> latitudePadrao = new Attribute<Double> (){ @Override public Double valueOfAttribute(Entity entity) { return ((Local)entity).getLatitudePadrao(); } }; public static final Attribute<Double> longitudePadrao = new Attribute<Double> (){ @Override public Double valueOfAttribute(Entity entity) { return ((Local)entity).getLongitudePadrao(); } }; public $Local(){ this.uuid = Uuid.generator(); } public $Local(Local obj){ this.setCodigo(obj.getCodigo()); this.setNome(obj.getNome()); this.setEstado(obj.getEstado()); this.setPais(obj.getPais()); this.setLatitudePadrao(obj.getLatitudePadrao()); this.setLongitudePadrao(obj.getLongitudePadrao()); this.uuid = Uuid.generator(); } public $Local(Local obj, Uuid uuid){ this.setCodigo(obj.getCodigo()); this.setNome(obj.getNome()); this.setEstado(obj.getEstado()); this.setPais(obj.getPais()); this.setLatitudePadrao(obj.getLatitudePadrao()); this.setLongitudePadrao(obj.getLongitudePadrao()); this.uuid = uuid; } public $Local($Local obj){ this.setCodigo(obj.getCodigo()); this.setNome(obj.getNome()); this.setEstado(obj.getEstado()); this.setPais(obj.getPais()); this.setLatitudePadrao(obj.getLatitudePadrao()); this.setLongitudePadrao(obj.getLongitudePadrao()); this.uuid = obj.getUuid();; } public $Local(Uuid uuid){ this.uuid = uuid; } @Override public boolean isEqual($Local obj) { return (this.getCodigo() == obj.getCodigo()) && (((this.getNome() == null) && (obj.getNome() == null)) || ((this.getNome() != null) && (obj.getNome() != null) && (this.getNome().equals( obj.getNome())))) && (((this.getEstado() == null) && (obj.getEstado() == null)) || ((this.getEstado() != null) && (obj.getEstado() != null) && (this.getEstado().equals( obj.getEstado())))) && (((this.getPais() == null) && (obj.getPais() == null)) || ((this.getPais() != null) && (obj.getPais() != null) && (this.getPais().equals( obj.getPais())))) && (this.getLatitudePadrao() == obj.getLatitudePadrao()) && (this.getLongitudePadrao() == obj.getLongitudePadrao()); } @Override public Uuid getUuid() { return this.uuid; } @Override public EntityStructure<$Local> getEntityStructure() { return entityStructure; } @Override public boolean inject(){ Uuid uuidInject = $Local.find(this); if(uuidInject == null){ $Local.entityStructure.add(this); UniqueOneLocal.uniqueOneLocalStructure.add(new UniqueOneLocal(this, this.getUuid())); RectangleOneLocal.rectangleOneLocalStructure.add(new RectangleOneLocal(this, this.getUuid())); CoordinateOneLocal.coordinateOneLocalStructure.add(new CoordinateOneLocal(this, this.getUuid())); EditionOneLocal.editionOneLocalStructure.add(new EditionOneLocal(this, this.getUuid())); PointOneLocal.pointOneLocalStructure.add(new PointOneLocal(this, this.getUuid())); return true; }else{ this.uuid = uuidInject; return false; } } @Override public boolean reject(){ Uuid uuidReject = $Local.find(this); if(uuidReject != null){ UniqueOneLocal.uniqueOneLocalStructure.remove(new UniqueOneLocal(this, this.getUuid())); RectangleOneLocal.rectangleOneLocalStructure.remove(new RectangleOneLocal(this, this.getUuid())); CoordinateOneLocal.coordinateOneLocalStructure.remove(new CoordinateOneLocal(this, this.getUuid())); EditionOneLocal.editionOneLocalStructure.remove(new EditionOneLocal(this, this.getUuid())); PointOneLocal.pointOneLocalStructure.remove(new PointOneLocal(this, this.getUuid())); $Local.entityStructure.remove(this); return true; }else{ return false; } } @Override public boolean modify(){ Uuid uuidOld = $Local.find(this); $Local entityOld = $Local.entityStructure.find(uuidOld); if(entityOld != null){ UniqueOneLocal uniqueOneLocalOld = new UniqueOneLocal(entityOld, entityOld.getUuid()); UniqueOneLocal uniqueOneLocalNew = new UniqueOneLocal(this, entityOld.getUuid()); if(uniqueOneLocalOld.hasSameKey(uniqueOneLocalNew)){ $Local.uniqueOneLocalStructure.remove(uniqueOneLocalOld); $Local.uniqueOneLocalStructure.add(uniqueOneLocalNew); } RectangleOneLocal rectangleOneLocalOld = new RectangleOneLocal(entityOld, entityOld.getUuid()); RectangleOneLocal rectangleOneLocalNew = new RectangleOneLocal(this, entityOld.getUuid()); if(rectangleOneLocalOld.hasSameKey(rectangleOneLocalNew)){ $Local.rectangleOneLocalStructure.remove(rectangleOneLocalOld); $Local.rectangleOneLocalStructure.add(rectangleOneLocalNew); } CoordinateOneLocal coordinateOneLocalOld = new CoordinateOneLocal(entityOld, entityOld.getUuid()); CoordinateOneLocal coordinateOneLocalNew = new CoordinateOneLocal(this, entityOld.getUuid()); if(coordinateOneLocalOld.hasSameKey(coordinateOneLocalNew)){ $Local.coordinateOneLocalStructure.remove(coordinateOneLocalOld); $Local.coordinateOneLocalStructure.add(coordinateOneLocalNew); } EditionOneLocal editionOneLocalOld = new EditionOneLocal(entityOld, entityOld.getUuid()); EditionOneLocal editionOneLocalNew = new EditionOneLocal(this, entityOld.getUuid()); if(editionOneLocalOld.hasSameKey(editionOneLocalNew)){ $Local.editionOneLocalStructure.remove(editionOneLocalOld); $Local.editionOneLocalStructure.add(editionOneLocalNew); } PointOneLocal pointOneLocalOld = new PointOneLocal(entityOld, entityOld.getUuid()); PointOneLocal pointOneLocalNew = new PointOneLocal(this, entityOld.getUuid()); if(pointOneLocalOld.hasSameKey(pointOneLocalNew)){ $Local.pointOneLocalStructure.remove(pointOneLocalOld); $Local.pointOneLocalStructure.add(pointOneLocalNew); } this.uuid = uuidOld; $Local.entityStructure.remove(entityOld); $Local.entityStructure.add(this); return true; }else{ return false; } } public static Uuid find($Local entity) { UniqueOneLocal unique = new UniqueOneLocal (entity, entity.getUuid()); return $Local.uniqueOneLocalStructure.find(unique); } @Override public boolean pullEntity(byte[] array, int position) { PullPage pull = new PullPage(array, position); Uuid storedClass = pull.pullUuid(); if ($Local.classId.equals(storedClass) == true){ uuid = pull.pullUuid(); this.setCodigo(pull.pullInteger()); this.setNome(pull.pullString()); this.setEstado(pull.pullString()); this.setPais(pull.pullString()); this.setLatitudePadrao(pull.pullDouble()); this.setLongitudePadrao(pull.pullDouble()); return true; } return false; } @Override public void pushEntity(byte[] array, int position){ PushPage push = new PushPage(array, position); push.pushUuid($Local.classId); push.pushUuid(uuid); push.pushInteger(this.getCodigo()); push.pushString(this.getNome()); push.pushString(this.getEstado()); push.pushString(this.getPais()); push.pushDouble(this.getLatitudePadrao()); push.pushDouble(this.getLongitudePadrao()); } @Override public int sizeOfEntity() { return Page.sizeOfUuid + Page.sizeOfUuid  + Page.sizeOfInteger + Page.sizeOfString(this.getNome()) + Page.sizeOfString(this.getEstado()) + Page.sizeOfString(this.getPais()) + Page.sizeOfDouble + Page.sizeOfDouble; } static{ codigo.getSchemas().add( new Schema<$Local, UniqueOneLocal, Integer>() { @Override public $Local newEntity(Integer value) { $Local obj = new $Local(); obj.setCodigo(value); return obj; } @Override public UniqueOneLocal newKey(Integer value) { UniqueOneLocal obj = new UniqueOneLocal(); obj.setCodigo(value); return obj; } @Override public EntityStructure<$Local> getEntityStructure() { return $Local.entityStructure; } @Override public KeyStructure<UniqueOneLocal> getKeyStructure() { return UniqueOneLocal.uniqueOneLocalStructure; } } ); nome.getSchemas().add( new Schema<$Local, EditionOneLocal, java.lang.String>() { @Override public $Local newEntity(java.lang.String value) { $Local obj = new $Local(); obj.setNome(value); return obj; } @Override public EditionOneLocal newKey(java.lang.String value) { EditionOneLocal obj = new EditionOneLocal(); obj.setNome(value); return obj; } @Override public EntityStructure<$Local> getEntityStructure() { return $Local.entityStructure; } @Override public KeyStructure<EditionOneLocal> getKeyStructure() { return EditionOneLocal.editionOneLocalStructure; } } ); latitudePadrao.getSchemas().add( new Schema<$Local, RectangleOneLocal, Double>() { @Override public $Local newEntity(Double value) { $Local obj = new $Local(); obj.setLatitudePadrao(value); return obj; } @Override public RectangleOneLocal newKey(Double value) { RectangleOneLocal obj = new RectangleOneLocal(); obj.setLatitudePadrao(value); return obj; } @Override public EntityStructure<$Local> getEntityStructure() { return $Local.entityStructure; } @Override public KeyStructure<RectangleOneLocal> getKeyStructure() { return RectangleOneLocal.rectangleOneLocalStructure; } } ); latitudePadrao.getSchemas().add( new Schema<$Local, PointOneLocal, Double>() { @Override public $Local newEntity(Double value) { $Local obj = new $Local(); obj.setLatitudePadrao(value); return obj; } @Override public PointOneLocal newKey(Double value) { PointOneLocal obj = new PointOneLocal(); obj.setLatitudePadrao(value); return obj; } @Override public EntityStructure<$Local> getEntityStructure() { return $Local.entityStructure; } @Override public KeyStructure<PointOneLocal> getKeyStructure() { return PointOneLocal.pointOneLocalStructure; } } ); latitudePadrao.getSchemas().add( new Schema<$Local, CoordinateOneLocal, Double>() { @Override public $Local newEntity(Double value) { $Local obj = new $Local(); obj.setLatitudePadrao(value); return obj; } @Override public CoordinateOneLocal newKey(Double value) { CoordinateOneLocal obj = new CoordinateOneLocal(); obj.setLatitudePadrao(value); return obj; } @Override public EntityStructure<$Local> getEntityStructure() { return $Local.entityStructure; } @Override public KeyStructure<CoordinateOneLocal> getKeyStructure() { return CoordinateOneLocal.coordinateOneLocalStructure; } } ); longitudePadrao.getSchemas().add( new Schema<$Local, RectangleOneLocal, Double>() { @Override public $Local newEntity(Double value) { $Local obj = new $Local(); obj.setLongitudePadrao(value); return obj; } @Override public RectangleOneLocal newKey(Double value) { RectangleOneLocal obj = new RectangleOneLocal(); obj.setLongitudePadrao(value); return obj; } @Override public EntityStructure<$Local> getEntityStructure() { return $Local.entityStructure; } @Override public KeyStructure<RectangleOneLocal> getKeyStructure() { return RectangleOneLocal.rectangleOneLocalStructure; } } ); longitudePadrao.getSchemas().add( new Schema<$Local, PointOneLocal, Double>() { @Override public $Local newEntity(Double value) { $Local obj = new $Local(); obj.setLongitudePadrao(value); return obj; } @Override public PointOneLocal newKey(Double value) { PointOneLocal obj = new PointOneLocal(); obj.setLongitudePadrao(value); return obj; } @Override public EntityStructure<$Local> getEntityStructure() { return $Local.entityStructure; } @Override public KeyStructure<PointOneLocal> getKeyStructure() { return PointOneLocal.pointOneLocalStructure; } } ); longitudePadrao.getSchemas().add( new Schema<$Local, CoordinateOneLocal, Double>() { @Override public $Local newEntity(Double value) { $Local obj = new $Local(); obj.setLongitudePadrao(value); return obj; } @Override public CoordinateOneLocal newKey(Double value) { CoordinateOneLocal obj = new CoordinateOneLocal(); obj.setLongitudePadrao(value); return obj; } @Override public EntityStructure<$Local> getEntityStructure() { return $Local.entityStructure; } @Override public KeyStructure<CoordinateOneLocal> getKeyStructure() { return CoordinateOneLocal.coordinateOneLocalStructure; } } ); } } 