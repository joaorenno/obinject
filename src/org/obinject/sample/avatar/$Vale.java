package org.obinject.sample.avatar; import org.obinject.block.Page; import org.obinject.block.PullPage; import org.obinject.block.PushPage; import org.obinject.device.File; import org.obinject.exception.TransientObjectException; import org.obinject.meta.Entity; import org.obinject.meta.Uuid; import org.obinject.queries.Attribute; import org.obinject.queries.Schema; import org.obinject.storage.BTree; import org.obinject.storage.BTreeEntity; import org.obinject.storage.EntityStructure; import org.obinject.storage.KeyStructure; import org.obinject.storage.Structure; public class $Vale extends Vale implements Entity<$Vale> { protected Uuid uuid; private static Uuid classId; public static Uuid getClassId(){ if ($Vale.classId == null) {$Vale.classId = Uuid.fromString("EB7A7CD2-3370-3C23-C469-A172FE74AE92"); }return $Vale.classId; } public static final BTreeEntity<$Vale> entityStructure = new BTreeEntity<$Vale>(new File("build/classes/org/obinject/sample/avatar/avatar.dbo", 4096)){}; public static final Attribute<java.lang.String> nome = new Attribute<java.lang.String> (){ @Override public java.lang.String valueOfAttribute(Entity entity) { return ((Vale)entity).getNome(); } }; public static final Attribute<java.util.List> arvores = new Attribute<java.util.List> (){ @Override public java.util.List valueOfAttribute(Entity entity) { return ((Vale)entity).getArvores(); } }; public static final Attribute<java.util.List> jazidas = new Attribute<java.util.List> (){ @Override public java.util.List valueOfAttribute(Entity entity) { return ((Vale)entity).getJazidas(); } }; public static final Attribute<java.util.List> batalha = new Attribute<java.util.List> (){ @Override public java.util.List valueOfAttribute(Entity entity) { return ((Vale)entity).getBatalha(); } }; public static final Attribute<Integer> profundidade = new Attribute<Integer> (){ @Override public Integer valueOfAttribute(Entity entity) { return ((Vale)entity).getProfundidade(); } }; public static final Attribute<Boolean> agua = new Attribute<Boolean> (){ @Override public Boolean valueOfAttribute(Entity entity) { return ((Vale)entity).isAgua(); } }; public static final Attribute<java.util.List> leonopterys = new Attribute<java.util.List> (){ @Override public java.util.List valueOfAttribute(Entity entity) { return ((Vale)entity).getLeonopterys(); } }; public static final Attribute<java.util.List> thanators = new Attribute<java.util.List> (){ @Override public java.util.List valueOfAttribute(Entity entity) { return ((Vale)entity).getThanators(); } }; public $Vale(){ this.uuid = Uuid.generator(); } public $Vale(Vale obj){ this.setNome(obj.getNome()); this.setArvores(obj.getArvores()); this.setJazidas(obj.getJazidas()); this.setBatalha(obj.getBatalha()); this.setProfundidade(obj.getProfundidade()); this.setAgua(obj.isAgua()); this.setLeonopterys(obj.getLeonopterys()); this.setThanators(obj.getThanators()); this.uuid = Uuid.generator(); } public $Vale(Vale obj, Uuid uuid){ this.setNome(obj.getNome()); this.setArvores(obj.getArvores()); this.setJazidas(obj.getJazidas()); this.setBatalha(obj.getBatalha()); this.setProfundidade(obj.getProfundidade()); this.setAgua(obj.isAgua()); this.setLeonopterys(obj.getLeonopterys()); this.setThanators(obj.getThanators()); this.uuid = uuid; } public $Vale($Vale obj){ this.setNome(obj.getNome()); this.setArvores(obj.getArvores()); this.setJazidas(obj.getJazidas()); this.setBatalha(obj.getBatalha()); this.setProfundidade(obj.getProfundidade()); this.setAgua(obj.isAgua()); this.setLeonopterys(obj.getLeonopterys()); this.setThanators(obj.getThanators()); this.uuid = obj.getUuid();; } public $Vale(Uuid uuid){ this.uuid = uuid; } protected java.util.List<Uuid> uuidArvores = new java.util.ArrayList<>(); @Override public java.util.List<org.obinject.sample.avatar.Arvore> getArvores() {java.util.List<org.obinject.sample.avatar.Arvore> superArvores = super.getArvores(); if ((superArvores.isEmpty()) && (!uuidArvores.isEmpty())) {for (Uuid uuid : uuidArvores) {superArvores.add($Arvore.entityStructure.find(uuid)); } }return superArvores; }private void resetUuidArvores(){ uuidArvores.clear(); if (this.getArvores() != null) {for (Arvore obj : this.getArvores()) { if (obj instanceof Entity) { uuidArvores.add(((Entity) obj).getUuid()); } else { $Arvore entity = new $Arvore (obj); uuidArvores.add($Arvore.find(entity)); if (uuidArvores == null) { throw new TransientObjectException("Vale", "arvores", "Arvore"); } } } } }protected java.util.List<Uuid> uuidJazidas = new java.util.ArrayList<>(); @Override public java.util.List<org.obinject.sample.avatar.Jazida> getJazidas() {java.util.List<org.obinject.sample.avatar.Jazida> superJazidas = super.getJazidas(); if ((superJazidas.isEmpty()) && (!uuidJazidas.isEmpty())) {for (Uuid uuid : uuidJazidas) {superJazidas.add($Jazida.entityStructure.find(uuid)); } }return superJazidas; }private void resetUuidJazidas(){ uuidJazidas.clear(); if (this.getJazidas() != null) {for (Jazida obj : this.getJazidas()) { if (obj instanceof Entity) { uuidJazidas.add(((Entity) obj).getUuid()); } else { $Jazida entity = new $Jazida (obj); uuidJazidas.add($Jazida.find(entity)); if (uuidJazidas == null) { throw new TransientObjectException("Vale", "jazidas", "Jazida"); } } } } }protected java.util.List<Uuid> uuidBatalha = new java.util.ArrayList<>(); @Override public java.util.List<org.obinject.sample.avatar.Batalha> getBatalha() {java.util.List<org.obinject.sample.avatar.Batalha> superBatalha = super.getBatalha(); if ((superBatalha.isEmpty()) && (!uuidBatalha.isEmpty())) {for (Uuid uuid : uuidBatalha) {superBatalha.add($Batalha.entityStructure.find(uuid)); } }return superBatalha; }private void resetUuidBatalha(){ uuidBatalha.clear(); if (this.getBatalha() != null) {for (Batalha obj : this.getBatalha()) { if (obj instanceof Entity) { uuidBatalha.add(((Entity) obj).getUuid()); } else { $Batalha entity = new $Batalha (obj); uuidBatalha.add($Batalha.find(entity)); if (uuidBatalha == null) { throw new TransientObjectException("Vale", "batalha", "Batalha"); } } } } }protected java.util.List<Uuid> uuidLeonopterys = new java.util.ArrayList<>(); @Override public java.util.List<org.obinject.sample.avatar.Leonopterys> getLeonopterys() {java.util.List<org.obinject.sample.avatar.Leonopterys> superLeonopterys = super.getLeonopterys(); if ((superLeonopterys.isEmpty()) && (!uuidLeonopterys.isEmpty())) {for (Uuid uuid : uuidLeonopterys) {superLeonopterys.add($Leonopterys.entityStructure.find(uuid)); } }return superLeonopterys; }private void resetUuidLeonopterys(){ uuidLeonopterys.clear(); if (this.getLeonopterys() != null) {for (Leonopterys obj : this.getLeonopterys()) { if (obj instanceof Entity) { uuidLeonopterys.add(((Entity) obj).getUuid()); } else { $Leonopterys entity = new $Leonopterys (obj); uuidLeonopterys.add($Leonopterys.find(entity)); if (uuidLeonopterys == null) { throw new TransientObjectException("Vale", "leonopterys", "Leonopterys"); } } } } }protected java.util.List<Uuid> uuidThanators = new java.util.ArrayList<>(); @Override public java.util.List<org.obinject.sample.avatar.Thanators> getThanators() {java.util.List<org.obinject.sample.avatar.Thanators> superThanators = super.getThanators(); if ((superThanators.isEmpty()) && (!uuidThanators.isEmpty())) {for (Uuid uuid : uuidThanators) {superThanators.add($Thanators.entityStructure.find(uuid)); } }return superThanators; }private void resetUuidThanators(){ uuidThanators.clear(); if (this.getThanators() != null) {for (Thanators obj : this.getThanators()) { if (obj instanceof Entity) { uuidThanators.add(((Entity) obj).getUuid()); } else { $Thanators entity = new $Thanators (obj); uuidThanators.add($Thanators.find(entity)); if (uuidThanators == null) { throw new TransientObjectException("Vale", "thanators", "Thanators"); } } } } }@Override public boolean isEqual($Vale obj) {  return (((this.getNome() == null) && (obj.getNome() == null)) || ((this.getNome() != null) && (obj.getNome() != null) && (this.getNome().equals( obj.getNome())))) && (this.getProfundidade() == obj.getProfundidade()) && (this.isAgua() == obj.isAgua()); } @Override public Uuid getUuid() { return this.uuid; } @Override public EntityStructure<$Vale> getEntityStructure() { return entityStructure; } @Override public boolean inject(){ Uuid uuidInject = $Vale.find(this); if(uuidInject == null){ resetUuidArvores(); resetUuidJazidas(); resetUuidBatalha(); resetUuidLeonopterys(); resetUuidThanators(); $Vale.entityStructure.add(this); UniqueOneRegiao.uniqueOneRegiaoStructure.add(new UniqueOneRegiao(this, this.getUuid())); return true; }else{ this.uuid = uuidInject; return false; } } @Override public boolean reject(){ Uuid uuidReject = $Vale.find(this); if(uuidReject != null){ UniqueOneRegiao.uniqueOneRegiaoStructure.remove(new UniqueOneRegiao(this, this.getUuid())); $Vale.entityStructure.remove(this); return true; }else{ return false; } } @Override public boolean modify(){ Uuid uuidOld = $Vale.find(this); $Vale entityOld = $Vale.entityStructure.find(uuidOld); if(entityOld != null){ resetUuidArvores(); resetUuidJazidas(); resetUuidBatalha(); resetUuidLeonopterys(); resetUuidThanators(); UniqueOneRegiao uniqueOneRegiaoOld = new UniqueOneRegiao(entityOld, entityOld.getUuid()); UniqueOneRegiao uniqueOneRegiaoNew = new UniqueOneRegiao(this, entityOld.getUuid()); if(uniqueOneRegiaoOld.hasSameKey(uniqueOneRegiaoNew)){ $Regiao.uniqueOneRegiaoStructure.remove(uniqueOneRegiaoOld); $Regiao.uniqueOneRegiaoStructure.add(uniqueOneRegiaoNew); } this.uuid = uuidOld; $Vale.entityStructure.remove(entityOld); $Vale.entityStructure.add(this); return true; }else{ return false; } } public static Uuid find($Vale entity) { UniqueOneRegiao unique = new UniqueOneRegiao (entity, entity.getUuid()); return $Regiao.uniqueOneRegiaoStructure.find(unique); } @Override public boolean pullEntity(byte[] array, int position) { PullPage pull = new PullPage(array, position); Uuid storedClass = pull.pullUuid(); if ($Vale.classId.equals(storedClass) == true){ uuid = pull.pullUuid(); this.setNome(pull.pullString()); int totalArvores = pull.pullInteger(); for (int i = 0; i < totalArvores; i++) {this.uuidArvores.add(pull.pullUuid()); }int totalJazidas = pull.pullInteger(); for (int i = 0; i < totalJazidas; i++) {this.uuidJazidas.add(pull.pullUuid()); }int totalBatalha = pull.pullInteger(); for (int i = 0; i < totalBatalha; i++) {this.uuidBatalha.add(pull.pullUuid()); }this.setProfundidade(pull.pullInteger()); this.setAgua(pull.pullBoolean()); int totalLeonopterys = pull.pullInteger(); for (int i = 0; i < totalLeonopterys; i++) {this.uuidLeonopterys.add(pull.pullUuid()); }int totalThanators = pull.pullInteger(); for (int i = 0; i < totalThanators; i++) {this.uuidThanators.add(pull.pullUuid()); }return true; } return false; } @Override public void pushEntity(byte[] array, int position){ PushPage push = new PushPage(array, position); push.pushUuid($Vale.classId); push.pushUuid(uuid); push.pushString(this.getNome()); push.pushInteger(this.uuidArvores.size()); for (Uuid uuidPush : this.uuidArvores) {push.pushUuid(uuidPush); }push.pushInteger(this.uuidJazidas.size()); for (Uuid uuidPush : this.uuidJazidas) {push.pushUuid(uuidPush); }push.pushInteger(this.uuidBatalha.size()); for (Uuid uuidPush : this.uuidBatalha) {push.pushUuid(uuidPush); }push.pushInteger(this.getProfundidade()); push.pushBoolean(this.isAgua()); push.pushInteger(this.uuidLeonopterys.size()); for (Uuid uuidPush : this.uuidLeonopterys) {push.pushUuid(uuidPush); }push.pushInteger(this.uuidThanators.size()); for (Uuid uuidPush : this.uuidThanators) {push.pushUuid(uuidPush); }} @Override public int sizeOfEntity() { return Page.sizeOfUuid + Page.sizeOfUuid  + Page.sizeOfString(this.getNome()) + Page.sizeOfEntityCollection(this.uuidArvores) + Page.sizeOfEntityCollection(this.uuidJazidas) + Page.sizeOfEntityCollection(this.uuidBatalha) + Page.sizeOfInteger + Page.sizeOfBoolean + Page.sizeOfEntityCollection(this.uuidLeonopterys) + Page.sizeOfEntityCollection(this.uuidThanators); } static{ nome.getSchemas().add( new Schema<$Vale, UniqueOneRegiao, java.lang.String>() { @Override public $Vale newEntity(java.lang.String value) { $Vale obj = new $Vale(); obj.setNome(value); return obj; } @Override public UniqueOneRegiao newKey(java.lang.String value) { UniqueOneRegiao obj = new UniqueOneRegiao(); obj.setNome(value); return obj; } @Override public EntityStructure<$Vale> getEntityStructure() { return $Vale.entityStructure; } @Override public KeyStructure<UniqueOneRegiao> getKeyStructure() { return UniqueOneRegiao.uniqueOneRegiaoStructure; } } ); } } 