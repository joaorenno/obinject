package org.obinject.sample.avatar; import org.obinject.block.Page; import org.obinject.block.PullPage; import org.obinject.block.PushPage; import org.obinject.device.File; import org.obinject.exception.TransientObjectException; import org.obinject.meta.Entity; import org.obinject.meta.Uuid; import org.obinject.queries.Attribute; import org.obinject.queries.Schema; import org.obinject.storage.BTree; import org.obinject.storage.BTreeEntity; import org.obinject.storage.EntityStructure; import org.obinject.storage.KeyStructure; import org.obinject.storage.Structure; public class $Cientista extends Cientista implements Entity<$Cientista> { protected Uuid uuid; private static Uuid classId; public static Uuid getClassId(){ if ($Cientista.classId == null) {$Cientista.classId = Uuid.fromString("790B9C59-DEED-504E-5577-C316A241F4B4"); }return $Cientista.classId; } public static final BTreeEntity<$Cientista> entityStructure = new BTreeEntity<$Cientista>(new File("build/classes/org/obinject/sample/avatar/avatar.dbo", 4096)){}; public static final Attribute<java.lang.String> cpf = new Attribute<java.lang.String> (){ @Override public java.lang.String valueOfAttribute(Entity entity) { return ((Cientista)entity).getCpf(); } }; public static final Attribute<java.lang.String> nome = new Attribute<java.lang.String> (){ @Override public java.lang.String valueOfAttribute(Entity entity) { return ((Cientista)entity).getNome(); } }; public static final Attribute<Boolean> morte = new Attribute<Boolean> (){ @Override public Boolean valueOfAttribute(Entity entity) { return ((Cientista)entity).isMorte(); } }; public static final Attribute<org.obinject.sample.avatar.Militar> hum_mil = new Attribute<org.obinject.sample.avatar.Militar> (){ @Override public org.obinject.sample.avatar.Militar valueOfAttribute(Entity entity) { return ((Cientista)entity).getHum_mil(); } }; public static final Attribute<org.obinject.sample.avatar.Minerador> hum_min = new Attribute<org.obinject.sample.avatar.Minerador> (){ @Override public org.obinject.sample.avatar.Minerador valueOfAttribute(Entity entity) { return ((Cientista)entity).getHum_min(); } }; public static final Attribute<org.obinject.sample.avatar.Cientista> hum_cien = new Attribute<org.obinject.sample.avatar.Cientista> (){ @Override public org.obinject.sample.avatar.Cientista valueOfAttribute(Entity entity) { return ((Cientista)entity).getHum_cien(); } }; public static final Attribute<java.lang.String> formacao = new Attribute<java.lang.String> (){ @Override public java.lang.String valueOfAttribute(Entity entity) { return ((Cientista)entity).getFormacao(); } }; public static final Attribute<java.util.List> pesquisas = new Attribute<java.util.List> (){ @Override public java.util.List valueOfAttribute(Entity entity) { return ((Cientista)entity).getPesquisas(); } }; public $Cientista(){ this.uuid = Uuid.generator(); } public $Cientista(Cientista obj){ this.setCpf(obj.getCpf()); this.setNome(obj.getNome()); this.setMorte(obj.isMorte()); this.setHum_mil(obj.getHum_mil()); this.setHum_min(obj.getHum_min()); this.setHum_cien(obj.getHum_cien()); this.setFormacao(obj.getFormacao()); this.setPesquisas(obj.getPesquisas()); this.uuid = Uuid.generator(); } public $Cientista(Cientista obj, Uuid uuid){ this.setCpf(obj.getCpf()); this.setNome(obj.getNome()); this.setMorte(obj.isMorte()); this.setHum_mil(obj.getHum_mil()); this.setHum_min(obj.getHum_min()); this.setHum_cien(obj.getHum_cien()); this.setFormacao(obj.getFormacao()); this.setPesquisas(obj.getPesquisas()); this.uuid = uuid; } public $Cientista($Cientista obj){ this.setCpf(obj.getCpf()); this.setNome(obj.getNome()); this.setMorte(obj.isMorte()); this.setHum_mil(obj.getHum_mil()); this.setHum_min(obj.getHum_min()); this.setHum_cien(obj.getHum_cien()); this.setFormacao(obj.getFormacao()); this.setPesquisas(obj.getPesquisas()); this.uuid = obj.getUuid();; } public $Cientista(Uuid uuid){ this.uuid = uuid; } protected Uuid uuidHum_mil; @Override public Militar getHum_mil(){ Militar superHum_mil = super.getHum_mil(); if (superHum_mil == null && uuidHum_mil != null) {superHum_mil = $Militar.entityStructure.find(uuidHum_mil); this.setHum_mil(superHum_mil); }return superHum_mil; }private void resetUuidHum_mil() { if (this.getHum_mil() != null) { if (this.getHum_mil() instanceof Entity) { uuidHum_mil = ((Entity) this.getHum_mil()).getUuid(); } else { $Militar entity = new $Militar (this.getHum_mil()); uuidHum_mil = $Militar.find(entity); if (uuidHum_mil == null) { throw new TransientObjectException("Cientista", "hum_mil", "Militar"); } } } }protected Uuid uuidHum_min; @Override public Minerador getHum_min(){ Minerador superHum_min = super.getHum_min(); if (superHum_min == null && uuidHum_min != null) {superHum_min = $Minerador.entityStructure.find(uuidHum_min); this.setHum_min(superHum_min); }return superHum_min; }private void resetUuidHum_min() { if (this.getHum_min() != null) { if (this.getHum_min() instanceof Entity) { uuidHum_min = ((Entity) this.getHum_min()).getUuid(); } else { $Minerador entity = new $Minerador (this.getHum_min()); uuidHum_min = $Minerador.find(entity); if (uuidHum_min == null) { throw new TransientObjectException("Cientista", "hum_min", "Minerador"); } } } }protected Uuid uuidHum_cien; @Override public Cientista getHum_cien(){ Cientista superHum_cien = super.getHum_cien(); if (superHum_cien == null && uuidHum_cien != null) {superHum_cien = $Cientista.entityStructure.find(uuidHum_cien); this.setHum_cien(superHum_cien); }return superHum_cien; }private void resetUuidHum_cien() { if (this.getHum_cien() != null) { if (this.getHum_cien() instanceof Entity) { uuidHum_cien = ((Entity) this.getHum_cien()).getUuid(); } else { $Cientista entity = new $Cientista (this.getHum_cien()); uuidHum_cien = $Cientista.find(entity); if (uuidHum_cien == null) { throw new TransientObjectException("Cientista", "hum_cien", "Cientista"); } } } }protected java.util.List<Uuid> uuidPesquisas = new java.util.ArrayList<>(); @Override public java.util.List<org.obinject.sample.avatar.Pesquisa> getPesquisas() {java.util.List<org.obinject.sample.avatar.Pesquisa> superPesquisas = super.getPesquisas(); if ((superPesquisas.isEmpty()) && (!uuidPesquisas.isEmpty())) {for (Uuid uuid : uuidPesquisas) {superPesquisas.add($Pesquisa.entityStructure.find(uuid)); } }return superPesquisas; }private void resetUuidPesquisas(){ uuidPesquisas.clear(); if (this.getPesquisas() != null) {for (Pesquisa obj : this.getPesquisas()) { if (obj instanceof Entity) { uuidPesquisas.add(((Entity) obj).getUuid()); } else { $Pesquisa entity = new $Pesquisa (obj); uuidPesquisas.add($Pesquisa.find(entity)); if (uuidPesquisas == null) { throw new TransientObjectException("Cientista", "pesquisas", "Pesquisa"); } } } } }@Override public boolean isEqual($Cientista obj) {  return (((this.getCpf() == null) && (obj.getCpf() == null)) || ((this.getCpf() != null) && (obj.getCpf() != null) && (this.getCpf().equals( obj.getCpf())))) && (((this.getNome() == null) && (obj.getNome() == null)) || ((this.getNome() != null) && (obj.getNome() != null) && (this.getNome().equals( obj.getNome())))) && (this.isMorte() == obj.isMorte()) && (((this.getFormacao() == null) && (obj.getFormacao() == null)) || ((this.getFormacao() != null) && (obj.getFormacao() != null) && (this.getFormacao().equals( obj.getFormacao())))); } @Override public Uuid getUuid() { return this.uuid; } @Override public EntityStructure<$Cientista> getEntityStructure() { return entityStructure; } @Override public boolean inject(){ Uuid uuidInject = $Cientista.find(this); if(uuidInject == null){ resetUuidHum_mil(); resetUuidHum_min(); resetUuidHum_cien(); resetUuidPesquisas(); $Cientista.entityStructure.add(this); UniqueOneHumano.uniqueOneHumanoStructure.add(new UniqueOneHumano(this, this.getUuid())); return true; }else{ this.uuid = uuidInject; return false; } } @Override public boolean reject(){ Uuid uuidReject = $Cientista.find(this); if(uuidReject != null){ UniqueOneHumano.uniqueOneHumanoStructure.remove(new UniqueOneHumano(this, this.getUuid())); $Cientista.entityStructure.remove(this); return true; }else{ return false; } } @Override public boolean modify(){ Uuid uuidOld = $Cientista.find(this); $Cientista entityOld = $Cientista.entityStructure.find(uuidOld); if(entityOld != null){ resetUuidHum_mil(); resetUuidHum_min(); resetUuidHum_cien(); resetUuidPesquisas(); UniqueOneHumano uniqueOneHumanoOld = new UniqueOneHumano(entityOld, entityOld.getUuid()); UniqueOneHumano uniqueOneHumanoNew = new UniqueOneHumano(this, entityOld.getUuid()); if(uniqueOneHumanoOld.hasSameKey(uniqueOneHumanoNew)){ $Humano.uniqueOneHumanoStructure.remove(uniqueOneHumanoOld); $Humano.uniqueOneHumanoStructure.add(uniqueOneHumanoNew); } this.uuid = uuidOld; $Cientista.entityStructure.remove(entityOld); $Cientista.entityStructure.add(this); return true; }else{ return false; } } public static Uuid find($Cientista entity) { UniqueOneHumano unique = new UniqueOneHumano (entity, entity.getUuid()); return $Humano.uniqueOneHumanoStructure.find(unique); } @Override public boolean pullEntity(byte[] array, int position) { PullPage pull = new PullPage(array, position); Uuid storedClass = pull.pullUuid(); if ($Cientista.classId.equals(storedClass) == true){ uuid = pull.pullUuid(); this.setCpf(pull.pullString()); this.setNome(pull.pullString()); this.setMorte(pull.pullBoolean()); int totalHum_mil = pull.pullInteger(); if(totalHum_mil > 0){this.uuidHum_mil = pull.pullUuid(); }int totalHum_min = pull.pullInteger(); if(totalHum_min > 0){this.uuidHum_min = pull.pullUuid(); }int totalHum_cien = pull.pullInteger(); if(totalHum_cien > 0){this.uuidHum_cien = pull.pullUuid(); }this.setFormacao(pull.pullString()); int totalPesquisas = pull.pullInteger(); for (int i = 0; i < totalPesquisas; i++) {this.uuidPesquisas.add(pull.pullUuid()); }return true; } return false; } @Override public void pushEntity(byte[] array, int position){ PushPage push = new PushPage(array, position); push.pushUuid($Cientista.classId); push.pushUuid(uuid); push.pushString(this.getCpf()); push.pushString(this.getNome()); push.pushBoolean(this.isMorte()); if (this.uuidHum_mil != null) { push.pushInteger(1); push.pushUuid(this.uuidHum_mil); } else {push.pushInteger(0); } if (this.uuidHum_min != null) { push.pushInteger(1); push.pushUuid(this.uuidHum_min); } else {push.pushInteger(0); } if (this.uuidHum_cien != null) { push.pushInteger(1); push.pushUuid(this.uuidHum_cien); } else {push.pushInteger(0); } push.pushString(this.getFormacao()); push.pushInteger(this.uuidPesquisas.size()); for (Uuid uuidPush : this.uuidPesquisas) {push.pushUuid(uuidPush); }} @Override public int sizeOfEntity() { return Page.sizeOfUuid + Page.sizeOfUuid  + Page.sizeOfString(this.getCpf()) + Page.sizeOfString(this.getNome()) + Page.sizeOfBoolean + Page.sizeOfEntity(this.uuidHum_mil) + Page.sizeOfEntity(this.uuidHum_min) + Page.sizeOfEntity(this.uuidHum_cien) + Page.sizeOfString(this.getFormacao()) + Page.sizeOfEntityCollection(this.uuidPesquisas); } static{ cpf.getSchemas().add( new Schema<$Cientista, UniqueOneHumano, java.lang.String>() { @Override public $Cientista newEntity(java.lang.String value) { $Cientista obj = new $Cientista(); obj.setCpf(value); return obj; } @Override public UniqueOneHumano newKey(java.lang.String value) { UniqueOneHumano obj = new UniqueOneHumano(); obj.setCpf(value); return obj; } @Override public EntityStructure<$Cientista> getEntityStructure() { return $Cientista.entityStructure; } @Override public KeyStructure<UniqueOneHumano> getKeyStructure() { return UniqueOneHumano.uniqueOneHumanoStructure; } } ); } } 